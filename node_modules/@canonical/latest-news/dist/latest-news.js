var canonicalLatestNews=function(e){"use strict";function n(){var e=document.querySelector("[data-js='latest-news']");e&&e.classList.remove("u-hide")}function f(e){var t=new Date(e);return t.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear()}function l(e,t,r){var a,n,i,l=w(t),d=l.querySelector(".article-time"),o=l.querySelector(".article-link"),c=l.querySelector(".article-title"),u=l.querySelector(".article-image"),s=l.querySelector(".article-author"),m=l.querySelector(".article-excerpt"),h=l.querySelector(".article-group"),p="",g=document.createElement("a");return r.hostname&&(p="https://"+r.hostname),e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0]&&e._embedded["wp:featuredmedia"][0].media_details&&e._embedded["wp:featuredmedia"][0].media_details.width&&e._embedded["wp:featuredmedia"][0].media_details.height&&(n={url:(a=e._embedded["wp:featuredmedia"][0]).source_url,alt:a.alt_text,width:a.media_details.width,height:a.media_details.height}),s&&(s.innerHTML=e.author.name),m&&(m.innerHTML=e.excerpt.rendered),h&&(h.innerHTML=e.group.name),d&&(d.setAttribute("datetime",e.date),d.innerText=f(e.date)),o&&(o.href=p+"/blog/"+e.slug,r.gtmEventLabel&&(o.onclick=function(){dataLayer.push({event:"GAEvent",eventCategory:"blog",eventAction:r.gtmEventLabel+" news link",eventLabel:e.slug})})),c&&(c.innerHTML=e.title.rendered),u&&n&&r.linkImage&&(g.href=p+"/blog/"+e.slug,u.appendChild(g)),u&&n&&((i=document.createElement("img")).setAttribute("src",n.url),i.setAttribute("alt",n.alt),i.setAttribute("width",n.width),i.setAttribute("height",n.height),r.linkImage?g.appendChild(i):u.appendChild(i)),l}function w(e){var t,r=document.querySelector(e);if("content"in r)t=document.importNode(r.content,!0);else{t=document.createDocumentFragment();for(var a=0;a<r.childNodes.length;a++)t.appendChild(r.childNodes[a].cloneNode(!0))}return t}function i(i){return function(e){var t=document.querySelector(i.articlesContainerSelector);if(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild);var r,a,n=JSON.parse(e.target.responseText);"spotlightContainerSelector"in i&&((r=document.querySelector(i.spotlightContainerSelector))?(a=n.latest_pinned_articles[0])&&r.appendChild(l(a,i.spotlightTemplateSelector,i)):console.warn("latest-news: No spotlight container found")),n.latest_articles&&n.latest_articles.forEach(function(e){t.appendChild(l(e,i.articleTemplateSelector,i))})}else console.warn("latest-news: No articles container found")}}function t(e){var t="https://ubuntu.com/blog/latest-news",r=[];n(),e.limit&&r.push("limit="+e.limit),e.tagId&&r.push("tag-id="+e.tagId),e.groupId&&r.push("group-id="+e.groupId),r.length&&(t+="?"+r.join("&"));var a=new XMLHttpRequest;a.addEventListener("load",i(e)),a.open("GET",t),a.send()}return void 0===window.fetchLatestNews&&(window.fetchLatestNews=t),e.articleDiv=l,e.fetchLatestNews=t,e.formatDate=f,e.getTemplate=w,e.latestArticlesCallback=i,e.revealSection=n,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=latest-news.js.map
